import { auth } from '@/lib/auth'; import { prisma } from '@/lib/prisma'; export default async function Pg(){ const s=await auth(); if(!s||(s as any).role!=='ADMIN') return <div className='bg-white border rounded p-4'>Acesso restrito ao admin.</div>; const [a,sv,b,c]=await Promise.all([prisma.appointment.count(),prisma.service.count(),prisma.barber.count(),prisma.user.count({where:{role:'CUSTOMER'}})]); return (<div className='space-y-4'><h1 className='text-2xl font-semibold'>Admin</h1><div className='grid grid-cols-1 md:grid-cols-4 gap-4'><Card title='Agendamentos' value={a}/><Card title='Servicos' value={sv}/><Card title='Barbeiros' value={b}/><Card title='Clientes' value={c}/></div></div>);} function Card({title,value}:{title:string,value:number}){return(<div className='bg-white border rounded p-4'><div className='text-sm text-gray-500'>{title}</div><div className='text-2xl font-semibold'>{value}</div></div>);}