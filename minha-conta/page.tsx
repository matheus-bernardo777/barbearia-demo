import { auth } from '@/lib/auth'; import { prisma } from '@/lib/prisma'; import { moneyBRL } from '@/lib/money'; export default async function Pg(){ const s=await auth(); if(!s) return <div className='bg-white border rounded p-4'>Faca login para ver seus agendamentos.</div>; const id=Number((s as any).user?.id); const appts=await prisma.appointment.findMany({ where:{ customerId:id }, include:{ service:true, barber:{ include:{ user:true } } }, orderBy:{ start:'desc' } }); return (<div className='bg-white border rounded p-4'><h1 className='text-xl font-semibold mb-4'>Meus agendamentos</h1><ul className='space-y-3'>{appts.map(a=>(<li key={a.id} className='border rounded p-3'><div className='font-medium'>{a.service.name} — {moneyBRL(a.service.priceCents)}</div><div className='text-sm text-gray-600'>{new Date(a.start).toLocaleString('pt-BR')} com {a.barber.user.name} — <span className='uppercase'>{a.status}</span></div></li>))}{appts.length===0&&<div className='text-sm text-gray-500'>Sem agendamentos ainda.</div>}</ul></div>); }